# name: CI/CD Workflow

# on:
#   push:
#     branches:
#       - dev # Trigger the workflow on pushes to the dev branch

# jobs:
#   test:
#     runs-on: ubuntu-latest
#     strategy:
#       matrix:
#         python-version: ['3.9', '3.10', '3.11', '3.12', '3.13'] # Define the Python versions to test

#     steps:
#     - name: Check out code
#       uses: actions/checkout@v3

#     - name: Set up Python
#       uses: actions/setup-python@v4
#       with:
#         python-version: ${{ matrix.python-version }}

#     - name: Install dependencies
#       run: |
#         python -m pip install --upgrade pip
#         pip install poetry
#         poetry install

#     - name: Run tests
#       run: |
#         poetry run pytest --maxfail=1 --disable-warnings

#   merge_and_bump:
#     runs-on: ubuntu-latest
#     needs: test
#     if: success()

#     steps:
#     - name: Check out code
#       uses: actions/checkout@v3
#       with:
#         token: ${{ secrets.GITHUB_TOKEN }}

        
#     - name: Merge dev into main
#       run: |
#         git config user.name "github-actions[bot]"
#         git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
#         git fetch origin main
#         git checkout main
#         git merge dev --allow-unrelated-histories -m "Merge branch 'dev' into main"
#         git push origin main
      
    
#     - name: Bump version
#       run: |
#         python -m pip install bumpversion
#         bumpversion patch
#         git push origin main --tags

#   publish:
#     runs-on: ubuntu-latest
#     needs: merge_and_bump

#     steps:
#     - name: Check out code
#       uses: actions/checkout@v3

#     - name: Set up Python
#       uses: actions/setup-python@v4
#       with:
#         python-version: '3.12'

#     - name: Install Poetry
#       run: |
#         python -m pip install --upgrade pip
#         pip install poetry

#     - name: Publish to PyPI
#       env:
#         POETRY_HTTP_BASIC_PYPI_USERNAME: __token__
#         POETRY_HTTP_BASIC_PYPI_PASSWORD: ${{ secrets.PYPI_TOKEN }}
#       run: poetry publish --build
